(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4270064","chunk-0b3658c2","chunk-d7c0dd8a"],{"1ced":function(l,t,e){"use strict";e.r(t);var s=function(){var l=this,t=l.$createElement,e=l._self._c||t;return e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"top"},[e("h3",[l._v("发票查验明细")]),l._v(" "),e("p",{staticClass:"billTitle",staticStyle:{"text-align":"center"}},[l._v(l._s(l.bill.invoiceTypeName))]),l._v(" "),e("div",{staticClass:"billinfo"},[e("span",[l._v("\n          发票代码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceDataCode))])]),l._v(" "),e("span",[l._v("\n          发票号码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceNumber))])]),l._v(" "),e("span",[l._v("\n          开票日期：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.billingTime))])]),l._v(" "),e("span",[l._v("\n          校验码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.checkCode))])]),l._v(" "),e("span",[l._v("\n          机器编号：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.taxDiskCode))])])])]),l._v(" "),e("div",{staticClass:"box"},[e("el-row",{staticStyle:{border:"1px solid #ccc"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            购\n            "),e("br"),l._v("买\n            "),e("br"),l._v("方\n          ")])]),l._v(" "),e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:16}},[e("div",{staticClass:"buyDetail"},[e("el-row",[e("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.purchaserName))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.taxpayerNumber))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),e("el-col",{attrs:{span:18}})],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),e("el-col",{attrs:{span:18}})],1)],1)]),l._v(" "),e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            密\n            "),e("br"),l._v("码\n            "),e("br"),l._v("区\n          ")])]),l._v(" "),e("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[e("div")])],1),l._v(" "),e("br"),l._v(" "),e("el-row",{staticClass:"goodsDetail",staticStyle:{"margin-top":"-15px"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",[l._v("货物或应税劳务、服务名称")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",[l._v("规格型号")])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",[l._v("单位")])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",[l._v("数量")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",[l._v("单价")])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",[l._v("金额")])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col",[l._v("税率")])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",[l._v("税额")])],1)],1)],1),l._v(" "),l._l(l.bill.detailData,(function(t){return e("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.goodserviceName))])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.model))])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.unit))])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.number))])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.price))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.sum))])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.taxRate))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.tax))])],1)],1)],1)})),l._v(" "),e("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",[l._v("合计")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalAmount))])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxNum))])],1)],1)],1),l._v(" "),e("el-row",{staticStyle:{border:"1px solid #ccc",height:"40px","line-height":"40px","text-align":"center"},attrs:{type:"flex"}},[e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:5}},[l._v("价格合计(大写)")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:10}},[l._v("六百五十体验版")]),l._v(" "),e("el-col",{attrs:{span:9}},[l._v("\n          (小写)\n          "),e("span",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxSum))])])],1),l._v(" "),e("el-row",{staticStyle:{border:"1px solid #ccc"},attrs:{type:"flex"}},[e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:1}},[e("div",{staticClass:"topTitle"},[l._v("\n            销\n            "),e("br"),l._v("售\n            "),e("br"),l._v("方\n          ")])]),l._v(" "),e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:16}},[e("div",{staticClass:"buyDetail"},[e("el-row",[e("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesName))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerNum))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerAddress))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerBankAccount))])],1)],1)]),l._v(" "),e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            备\n            "),e("br"),l._v("注\n            "),e("br"),l._v("区\n          ")])]),l._v(" "),e("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[e("div",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceRemarks))])])],1)],2)]),l._v(" "),e("div",{staticClass:"right"},[e("el-form",{ref:"validForm",attrs:{"label-position":l.labelPosition,"label-width":"120px",model:l.form}},[e("h2",{staticStyle:{"text-align":"center"}},[l._v("发票录入")]),l._v(" "),e("el-form-item",{attrs:{label:"发票归属部门",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[e("el-select",{attrs:{filterable:"",placeholder:"所在部门"},model:{value:l.form.fp_gsbm,callback:function(t){l.$set(l.form,"fp_gsbm",t)},expression:"form.fp_gsbm"}},l._l(l.bmOptions,(function(l){return e("el-option",{key:l.id,attrs:{label:l.bmmc,value:l.id}})})),1)],1),l._v(" "),e("el-form-item",{attrs:{label:"发票归属人",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[e("el-select",{attrs:{filterable:"",placeholder:"发票归属人"},model:{value:l.form.fp_gsr,callback:function(t){l.$set(l.form,"fp_gsr",t)},expression:"form.fp_gsr"}},l._l(l.userOptions,(function(l){return e("el-option",{key:l.id,attrs:{label:l.zymc,value:l.id}})})),1)],1),l._v(" "),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:l.form.fp_bz,callback:function(t){l.$set(l.form,"fp_bz",t)},expression:"form.fp_bz"}})],1),l._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){return l.saveBill("validForm")}}},[l._v("录入")]),l._v(" "),e("el-button",[l._v("返回")])],1)],1)],1),l._v(" "),e("common-table"),l._v(" "),e("pass-table",{attrs:{"scan-str":l.billResJSON}})],1)},a=[],r=(e("28a5"),e("2934")),o=e("5521"),i=e("4df52"),c={name:"Bill",components:{passTable:i["default"],commonTable:o["default"]},data:function(){return{labelPosition:"right",form:{fp_gsr:"",fp_gsbm:"",fp_bz:""},billResJSON:"",bill:{invoiceTypeName:"",invoiceDataCode:"",invoiceNumber:"",billingTime:"",checkCode:"",taxDiskCode:"",purchaserName:"",taxpayerNumber:"",salesName:"",salesTaxpayerNum:"",salesTaxpayerBankAccount:"",salesTaxpayerAddress:"",totalTaxNum:"",totalTaxSum:"",totalAmount:"",invoiceRemarks:"",detailData:[{goodserviceName:"",sum:"",number:"",taxRate:"",model:"",price:"",tax:"",unit:""}]},bmOptions:[],userOptions:[],billTypeCode1:["01","04","10"],billTypeCode2:["11"],billTypeCode3:["14"]}},beforeMount:function(){if(!this.$route.params.scanStr)return this.$message.error("请先验证发票"),void this.$router.go(-1);this.getAllUser(),this.getAllBm()},mounted:function(){this.fetchIsHave()},methods:{getAllBm:function(){var l=this,t={dwbm:localStorage.getItem("dwbm")};Object(r["a"])("/manager/queryAllBm",t,"POST").then((function(t){0==t.code&&(l.bmOptions=t.data.data,console.log(l.bmOptions))}))},getAllUser:function(){var l=this,t={dwbm:localStorage.getItem("dwbm"),bmbm:this.form.fp_gsbm};Object(r["a"])("/manager/queryAllUser",t,"POST").then((function(t){0==t.code&&(l.userOptions=t.data,console.log(l.userOptions))}))},fetchIsHave:function(){var l=this;if(this.$route.params.scanStr){var t=this.$route.params.scanStr.split(",")[2];console.log("编码：",t),Object(r["a"])("/bill/getBillInfo",{code:t},"POST").then((function(t){0==t.code?(l.$message.warning("记录已存在，请勿重复录入"),l.handleUserInfo(t.data),l.billResJSON=t.data.fp_detail.fp_detail,l.handleBillInfo(t.data.fp_detail.fp_detail)):l.queryByScan()}))}},queryByScan:function(){var l=this,t={scanStr:this.$route.params.scanStr,token:localStorage.getItem("lsToken")};Object(r["a"])("/bill/queryBillByScan",t,"post").then((function(t){console.log(t),0==t.code?1e3==t.data.resultCode?(l.billResJSON=t.data.invoiceResult,l.handleBillInfo(t.data.invoiceResult)):(l.$message.error(t.data.resultMsg),l.$router.go(-1)):(l.$message.error(t.message),l.$router.go(-1))}))},handleBillInfo:function(l){console.log(l);var t=JSON.parse(l);this.bill.invoiceTypeName=t.invoiceTypeName,this.bill.invoiceDataCode=t.invoiceDataCode,this.bill.invoiceNumber=t.invoiceNumber,this.bill.billingTime=t.billingTime,this.bill.checkCode=t.checkCode,this.bill.taxDiskCode=t.taxDiskCode,this.bill.purchaserName=t.purchaserName,this.bill.taxpayerNumber=t.taxpayerNumber,this.bill.salesName=t.salesName,this.bill.salesTaxpayerNum=t.salesTaxpayerNum,this.bill.salesTaxpayerBankAccount=t.salesTaxpayerBankAccount,this.bill.salesTaxpayerAddress=t.salesTaxpayerAddress,this.bill.totalTaxNum=t.totalTaxNum,this.bill.totalTaxSum=t.totalTaxSum,this.bill.totalAmount=t.totalAmount,this.bill.invoiceRemarks=t.invoiceRemarks,this.bill.detailData=t.invoiceDetailData},handleUserInfo:function(l){console.log(l),this.form.fp_gsr=l.fp_gsr,this.form.fp_gsbm=l.fp_gsbm,this.form.fp_bz=l.fp_bz},saveBill:function(l){var t=this;console.log(l),""!=this.billResJSON?this.$refs[l].validate((function(l){if(l){var e=Object.assign(t.form,{billInfo:t.billResJSON},{uid:localStorage.getItem("userId")});console.log(e),Object(r["a"])("/bill/saveBill",e,"POST").then((function(l){0==l.code?t.$message.success("录入成功"):t.$message.error(l.message)}))}})):this.$message.error("发票信息为空,请先验证发票")}}},n=c,p=(e("2858"),e("2877")),v=Object(p["a"])(n,s,a,!1,null,null,null);t["default"]=v.exports},2858:function(l,t,e){"use strict";var s=e("de7e"),a=e.n(s);a.a},"4df52":function(l,t,e){"use strict";e.r(t);var s=function(){var l=this,t=l.$createElement,e=l._self._c||t;return e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"top"},[e("h3",[l._v("发票查验明细")]),l._v(" "),e("p",{staticClass:"billTitle",staticStyle:{"text-align":"center"}},[l._v(l._s(l.bill.invoiceTypeName))]),l._v(" "),e("div",{staticClass:"billinfo"},[e("span",[l._v("\n          发票代码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceDataCode))])]),l._v(" "),e("span",[l._v("\n          发票号码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceNumber))])]),l._v(" "),e("span",[l._v("\n          开票日期：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.billingTime))])]),l._v(" "),e("span",[l._v("\n          校验码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.checkCode))])]),l._v(" "),e("span",[l._v("\n          机器编号：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.taxDiskCode))])])])]),l._v(" "),e("div",{staticClass:"box"},[e("el-row",{staticStyle:{border:"1px solid #ccc"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            购\n            "),e("br"),l._v("买\n            "),e("br"),l._v("方\n          ")])]),l._v(" "),e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:16}},[e("div",{staticClass:"buyDetail"},[e("el-row",[e("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.purchaserName))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.taxpayerNumber))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),e("el-col",{attrs:{span:18}})],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),e("el-col",{attrs:{span:18}})],1)],1)]),l._v(" "),e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            密\n            "),e("br"),l._v("码\n            "),e("br"),l._v("区\n          ")])]),l._v(" "),e("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[e("div")])],1),l._v(" "),e("br"),l._v(" "),e("el-row",{staticClass:"goodsDetail",staticStyle:{"margin-top":"-15px"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",[l._v("货物或应税劳务、服务名称")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",[l._v("车牌号")])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",[l._v("通行日期起")])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",[l._v("通行日期止")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",[l._v("金额")])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col",[l._v("税率")])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",[l._v("税额")])],1)],1)],1),l._v(" "),l._l(l.bill.detailData,(function(t){return e("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.goodserviceName))])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.plateNo))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.passStartDate))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.passEndDate))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.sum))])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.taxRate))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.tax))])],1)],1)],1)})),l._v(" "),e("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",[l._v("合计")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalAmount))])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxNum))])],1)],1)],1),l._v(" "),e("el-row",{staticStyle:{border:"1px solid #ccc","border-bottom":"none",height:"40px","line-height":"40px","text-align":"center"},attrs:{type:"flex"}},[e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:5}},[l._v("价格合计(大写)")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:10}},[l._v("六百五十体验版")]),l._v(" "),e("el-col",{attrs:{span:9}},[l._v("\n          (小写)\n          "),e("span",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxSum))])])],1),l._v(" "),e("el-row",{staticStyle:{border:"1px solid #ccc"},attrs:{type:"flex"}},[e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:1}},[e("div",{staticClass:"topTitle"},[l._v("\n            销\n            "),e("br"),l._v("售\n            "),e("br"),l._v("方\n          ")])]),l._v(" "),e("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:16}},[e("div",{staticClass:"buyDetail"},[e("el-row",[e("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesName))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerNum))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerAddress))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerBankAccount))])],1)],1)]),l._v(" "),e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            备\n            "),e("br"),l._v("注\n            "),e("br"),l._v("区\n          ")])]),l._v(" "),e("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[e("div",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceRemarks))])])],1)],2)]),l._v(" "),e("div",{staticClass:"right"},[e("el-form",{ref:"validForm",attrs:{"label-position":l.labelPosition,"label-width":"120px",model:l.form}},[e("h2",{staticStyle:{"text-align":"center"}},[l._v("发票录入")]),l._v(" "),e("el-form-item",{attrs:{label:"发票归属部门",prop:"fp_gsbm",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[e("el-select",{attrs:{filterable:"",placeholder:"所在部门"},model:{value:l.form.fp_gsbm,callback:function(t){l.$set(l.form,"fp_gsbm",t)},expression:"form.fp_gsbm"}},l._l(l.bmOptions,(function(l){return e("el-option",{key:l.id,attrs:{label:l.bmmc,value:l.id}})})),1)],1),l._v(" "),e("el-form-item",{attrs:{label:"发票归属人"}},[e("el-select",{attrs:{filterable:"",placeholder:"发票归属人"},model:{value:l.form.fp_gsr,callback:function(t){l.$set(l.form,"fp_gsr",t)},expression:"form.fp_gsr"}},l._l(l.userOptions,(function(l){return e("el-option",{key:l.id,attrs:{label:l.zymc,value:l.id}})})),1)],1),l._v(" "),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:l.form.fp_bz,callback:function(t){l.$set(l.form,"fp_bz",t)},expression:"form.fp_bz"}})],1),l._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){return l.saveBill("validForm")}}},[l._v("录入")]),l._v(" "),e("el-button",{on:{click:l.backJump}},[l._v("返回")])],1)],1)],1)])},a=[],r=e("2934"),o={dwbm:localStorage.getItem("dwbm")},i={name:"Bill",data:function(){return{labelPosition:"right",form:{fp_gsr:"",fp_gsbm:"",fp_bz:""},billResJSON:"",bill:{invoiceTypeName:"",invoiceDataCode:"",invoiceNumber:"",billingTime:"",checkCode:"",taxDiskCode:"",purchaserName:"",taxpayerNumber:"",salesName:"",salesTaxpayerNum:"",salesTaxpayerBankAccount:"",salesTaxpayerAddress:"",totalTaxNum:"",totalTaxSum:"",totalAmount:"",invoiceRemarks:"",detailData:[{}]},bmOptions:[],userOptions:[]}},beforeMount:function(){if(!this.$route.params.scanStr)return this.$message.error("请先验证发票"),void this.$router.go(-1);this.getAllUser(),this.getAllBm()},mounted:function(){this.handleBillInfo(),this.handleUserInfo()},methods:{backJump:function(){this.$router.go(-1)},getAllBm:function(){var l=this,t={dwbm:localStorage.getItem("dwbm")};Object(r["a"])("/manager/queryAllBm",t,"POST").then((function(t){0==t.code&&(l.bmOptions=t.data.data)}))},getAllUser:function(){var l=this,t={dwbm:localStorage.getItem("dwbm"),bmbm:this.form.fp_gsbm};Object(r["a"])("/manager/queryAllUser",t,"POST").then((function(t){0==t.code&&(l.userOptions=t.data)}))},handleBillInfo:function(){if(this.$route.params.scanStr){var l=this.$route.params.scanStr;this.$route.params.isHave&&(this.$message.warning("发票已存在，请勿重复录入"),l=this.$route.params.scanStr.fp_detail.fp_detail),this.billResJSON=l,console.log("table:",l),l=JSON.parse(l),this.bill.invoiceTypeName=l.invoiceTypeName,this.bill.invoiceDataCode=l.invoiceDataCode,this.bill.invoiceNumber=l.invoiceNumber,this.bill.billingTime=l.billingTime,this.bill.checkCode=l.checkCode,this.bill.taxDiskCode=l.taxDiskCode,this.bill.purchaserName=l.purchaserName,this.bill.taxpayerNumber=l.taxpayerNumber,this.bill.salesName=l.salesName,this.bill.salesTaxpayerNum=l.salesTaxpayerNum,this.bill.salesTaxpayerBankAccount=l.salesTaxpayerBankAccount,this.bill.salesTaxpayerAddress=l.salesTaxpayerAddress,this.bill.totalTaxNum=l.totalTaxNum,this.bill.totalTaxSum=l.totalTaxSum,this.bill.totalAmount=l.totalAmount,this.bill.invoiceRemarks=l.invoiceRemarks,this.bill.detailData=l.invoiceDetailData}},handleUserInfo:function(){if(this.$route.params.isHave){var l=this.$route.params.scanStr;console.log(l.fp_gsr),l.fp_gsbm&&(this.form.fp_gsr=l.fp_gsr,this.form.fp_gsbm=l.fp_gsbm,this.form.fp_bz=l.fp_bz)}},saveBill:function(l){var t=this;console.log(l),""!=this.billResJSON?this.$refs[l].validate((function(l){if(l){var e=Object.assign(t.form,{billInfo:t.billResJSON},{uid:localStorage.getItem("userId")},o);console.log(e),Object(r["a"])("/bill/saveBill",e,"POST").then((function(l){0==l.code?(t.$message.success("操作成功"),t.$router.go(-1)):t.$message.error(l.message)}))}})):this.$message.error("发票信息为空,请先验证发票")}}},c=i,n=(e("f9ba"),e("2877")),p=Object(n["a"])(c,s,a,!1,null,"46d35e36",null);t["default"]=p.exports},5521:function(l,t,e){"use strict";e.r(t);var s=function(){var l=this,t=l.$createElement,e=l._self._c||t;return e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"top"},[e("h3",[l._v("发票查验明细")]),l._v(" "),e("p",{staticClass:"billTitle",staticStyle:{"text-align":"center"}},[l._v(l._s(l.bill.invoiceTypeName))]),l._v(" "),e("div",{staticClass:"billinfo"},[e("span",[l._v("\n          发票代码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceDataCode))])]),l._v(" "),e("span",[l._v("\n          发票号码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceNumber))])]),l._v(" "),e("span",[l._v("\n          开票日期：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.billingTime))])]),l._v(" "),e("span",[l._v("\n          校验码：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.checkCode))])]),l._v(" "),e("span",[l._v("\n          机器编号：\n          "),e("span",{staticClass:"purple"},[l._v(l._s(l.bill.taxDiskCode))])])])]),l._v(" "),e("div",{staticClass:"box"},[e("el-row",{staticStyle:{border:"1px solid #945555"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #945555"}},[l._v("\n            购\n            "),e("br"),l._v("买\n            "),e("br"),l._v("方\n          ")])]),l._v(" "),e("el-col",{staticStyle:{"border-right":"1px solid #945555"},attrs:{span:16}},[e("div",{staticClass:"buyDetail"},[e("el-row",[e("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.purchaserName))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.taxpayerNumber))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),e("el-col",{attrs:{span:18}})],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),e("el-col",{attrs:{span:18}})],1)],1)]),l._v(" "),e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #945555"}},[l._v("\n            密\n            "),e("br"),l._v("码\n            "),e("br"),l._v("区\n          ")])]),l._v(" "),e("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[e("div")])],1),l._v(" "),e("br"),l._v(" "),e("el-row",{staticClass:"goodsDetail",staticStyle:{"margin-top":"-15px"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",[l._v("货物或应税劳务、服务名称")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",[l._v("规格型号")])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",[l._v("单位")])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",[l._v("数量")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",[l._v("单价")])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",[l._v("金额")])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col",[l._v("税率")])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",[l._v("税额")])],1)],1)],1),l._v(" "),l._l(l.bill.detailData,(function(t){return e("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.goodserviceName))])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.model))])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.unit))])],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(parseFloat(t.number).toFixed(2)))])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(parseFloat(t.price).toFixed(2)))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.sum))])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.taxRate))])],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v(l._s(t.tax))])],1)],1)],1)})),l._v(" "),e("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[e("el-col",{attrs:{span:5}},[e("el-row",[e("el-col",[l._v("合计")])],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:2}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:3}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalAmount))])],1)],1),l._v(" "),e("el-col",{attrs:{span:1}},[e("el-row",[e("el-col")],1)],1),l._v(" "),e("el-col",{attrs:{span:4}},[e("el-row",[e("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxNum))])],1)],1)],1),l._v(" "),e("el-row",{staticStyle:{border:"1px solid #945555",height:"40px","line-height":"40px","text-align":"center","border-bottom":"none"},attrs:{type:"flex"}},[e("el-col",{staticStyle:{"border-right":"1px solid #945555"},attrs:{span:5}},[l._v("价格合计(大写)")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:10}},[l._v(l._s(l.bill.chineseTaxSum))]),l._v(" "),e("el-col",{attrs:{span:9}},[l._v("\n          (小写)\n          "),e("span",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxSum))])])],1),l._v(" "),e("el-row",{staticStyle:{border:"1px solid #945555"},attrs:{type:"flex"}},[e("el-col",{staticStyle:{"border-right":"1px solid #945555"},attrs:{span:1}},[e("div",{staticClass:"topTitle"},[l._v("\n            销\n            "),e("br"),l._v("售\n            "),e("br"),l._v("方\n          ")])]),l._v(" "),e("el-col",{staticStyle:{"border-right":"1px solid #945555"},attrs:{span:16}},[e("div",{staticClass:"buyDetail"},[e("el-row",[e("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesName))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerNum))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerAddress))])],1),l._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),e("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerBankAccount))])],1)],1)]),l._v(" "),e("el-col",{attrs:{span:1}},[e("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #945555"}},[l._v("\n            备\n            "),e("br"),l._v("注\n            "),e("br"),l._v("区\n          ")])]),l._v(" "),e("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[e("div",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceRemarks))])])],1)],2)]),l._v(" "),e("div",{staticClass:"right"},[e("el-form",{ref:"validForm",attrs:{"label-position":l.labelPosition,"label-width":"120px",model:l.form}},[e("h2",{staticStyle:{"text-align":"center"}},[l._v("发票录入")]),l._v(" "),e("el-form-item",{attrs:{label:"发票归属部门",prop:"fp_gsbm",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[e("el-select",{attrs:{filterable:"",placeholder:"所在部门"},model:{value:l.form.fp_gsbm,callback:function(t){l.$set(l.form,"fp_gsbm",t)},expression:"form.fp_gsbm"}},l._l(l.bmOptions,(function(l){return e("el-option",{key:l.id,attrs:{label:l.bmmc,value:l.id}})})),1)],1),l._v(" "),e("el-form-item",{attrs:{label:"发票归属人"}},[e("el-select",{attrs:{filterable:"",placeholder:"发票归属人"},model:{value:l.form.fp_gsr,callback:function(t){l.$set(l.form,"fp_gsr",t)},expression:"form.fp_gsr"}},l._l(l.userOptions,(function(l){return e("el-option",{key:l.id,attrs:{label:l.zymc,value:l.id}})})),1)],1),l._v(" "),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:l.form.fp_bz,callback:function(t){l.$set(l.form,"fp_bz",t)},expression:"form.fp_bz"}})],1),l._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){return l.saveBill("validForm")}}},[l._v("录入")]),l._v(" "),e("el-button",{on:{click:function(t){return l.backJump()}}},[l._v("返回")])],1)],1)],1)])},a=[],r=e("2934");e("c5f6"),e("28a5"),e("6b54");function o(l){var t,e,s,a=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖"),r=new Array("","拾","佰","仟"),o=new Array("","万","亿","兆"),i=new Array("角","分","毫","厘"),c="整",n="元",p=1e15,v="";if(""==l)return"";if(l=parseFloat(l),l>=p)return alert("超出最大处理数字"),"";if(0==l)return v=a[0]+n+c,v;if(l=l.toString(),-1==l.indexOf(".")?(t=l,e=""):(s=l.split("."),t=s[0],e=s[1].substr(0,4)),parseInt(t,10)>0){for(var _=0,u=t.length,b=0;b<u;b++){var m=t.substr(b,1),d=u-b-1,f=d/4,h=d%4;"0"==m?_++:(_>0&&(v+=a[0]),_=0,v+=a[parseInt(m)]+r[h]),0==h&&_<4&&(v+=o[f])}v+=n}if(""!=e){var g=e.length;for(b=0;b<g;b++){m=e.substr(b,1);"0"!=m&&(v+=a[Number(m)]+i[b])}}return""==v?v+=a[0]+n+c:""==e&&(v+=c),v}var i={dwbm:localStorage.getItem("dwbm")},c={name:"Bill",data:function(){return{labelPosition:"right",form:{fp_gsr:"",fp_gsbm:"",fp_bz:""},billResJSON:"",bill:{invoiceTypeName:"",invoiceDataCode:"",invoiceNumber:"",billingTime:"",checkCode:"",taxDiskCode:"",purchaserName:"",taxpayerNumber:"",salesName:"",salesTaxpayerNum:"",salesTaxpayerBankAccount:"",salesTaxpayerAddress:"",totalTaxNum:"",totalTaxSum:"",totalAmount:"",invoiceRemarks:"",detailData:[{goodserviceName:"",sum:"",number:"",taxRate:"",model:"",price:"",tax:"",unit:""}]},bmOptions:[],userOptions:[]}},beforeMount:function(){if(!this.$route.params.scanStr)return this.$message.error("请先验证发票"),void this.$router.go(-1);this.getAllUser(),this.getAllBm()},mounted:function(){this.handleBillInfo(),this.handleUserInfo()},methods:{backJump:function(){this.$router.go(-1)},getAllBm:function(){var l=this,t={dwbm:localStorage.getItem("dwbm")};Object(r["a"])("/manager/queryAllBm",t,"POST").then((function(t){0==t.code&&(l.bmOptions=t.data.data)}))},getAllUser:function(){var l=this,t={dwbm:localStorage.getItem("dwbm"),bmbm:this.form.fp_gsbm};Object(r["a"])("/manager/queryAllUser",t,"POST").then((function(t){0==t.code&&(l.userOptions=t.data)}))},handleBillInfo:function(){if(this.$route.params.scanStr){var l=this.$route.params.scanStr;this.$route.params.isHave&&(this.$message.warning("发票已存在，请勿重复录入"),l=this.$route.params.scanStr.fp_detail.fp_detail),this.billResJSON=l,console.log("table:",l),l=JSON.parse(l),this.bill.invoiceTypeName=l.invoiceTypeName,this.bill.invoiceDataCode=l.invoiceDataCode,this.bill.invoiceNumber=l.invoiceNumber,this.bill.billingTime=l.billingTime,this.bill.checkCode=l.checkCode,this.bill.taxDiskCode=l.taxDiskCode,this.bill.purchaserName=l.purchaserName,this.bill.taxpayerNumber=l.taxpayerNumber,this.bill.salesName=l.salesName,this.bill.salesTaxpayerNum=l.salesTaxpayerNum,this.bill.salesTaxpayerBankAccount=l.salesTaxpayerBankAccount,this.bill.salesTaxpayerAddress=l.salesTaxpayerAddress,this.bill.totalTaxNum=l.totalTaxNum,this.bill.totalTaxSum=l.totalTaxSum,this.bill.totalAmount=l.totalAmount,this.bill.invoiceRemarks=l.invoiceRemarks,this.bill.detailData=l.invoiceDetailData,console.log(parseFloat(l.totalTaxSum)),this.bill.chineseTaxSum=o(parseFloat(l.totalTaxSum))}},handleUserInfo:function(){if(this.$route.params.isHave){var l=this.$route.params.scanStr;console.log(l.fp_gsr),l.fp_gsbm&&(this.form.fp_gsr=l.fp_gsr,this.form.fp_gsbm=l.fp_gsbm,this.form.fp_bz=l.fp_bz)}},saveBill:function(l){var t=this;console.log(l),""!=this.billResJSON?this.$refs[l].validate((function(l){if(l){var e=Object.assign(t.form,{billInfo:t.billResJSON},{uid:localStorage.getItem("userId")},i);console.log(e),Object(r["a"])("/bill/saveBill",e,"POST").then((function(l){0==l.code?(t.$message.success("操作成功"),t.$router.go(-1)):t.$message.error(l.message)}))}})):this.$message.error("发票信息为空,请先验证发票")}}},n=c,p=(e("ed0e"),e("2877")),v=Object(p["a"])(n,s,a,!1,null,"6cc55802",null);t["default"]=v.exports},"846c":function(l,t,e){},c91f:function(l,t,e){},de7e:function(l,t,e){},ed0e:function(l,t,e){"use strict";var s=e("846c"),a=e.n(s);a.a},f9ba:function(l,t,e){"use strict";var s=e("c91f"),a=e.n(s);a.a}}]);