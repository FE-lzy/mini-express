(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-599daa7a"],{"26b8":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"tableBox"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-form-item",{attrs:{label:"员工名称"}},[a("el-input",{attrs:{placeholder:"员工名称"},model:{value:t.form.zymc,callback:function(e){t.$set(t.form,"zymc",e)},expression:"form.zymc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所在部门"}},[a("el-select",{attrs:{placeholder:"所在部门"},model:{value:t.form.bmbm,callback:function(e){t.$set(t.form,"bmbm",e)},expression:"form.bmbm"}},t._l(t.bmOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.bmmc,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:function(e){return t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addForm}},[t._v("新增")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"员工编码",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zymc",label:"员工名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bmmc",label:"部门名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dwmc",label:"单位名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bz",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.UpdateForm(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteRow(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":t.current,"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.current=e},"update:current-page":function(e){t.current=e},"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"操作",visible:t.visible,width:"20%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm}},[a("el-form-item",{attrs:{label:"员工名称","label-width":t.formLabelWidth,prop:"zymc",rules:[{required:!0,message:"不能为空"}]}},[a("el-input",{attrs:{placeholder:"请输入内容",autocomplete:"off"},model:{value:t.dialogForm.zymc,callback:function(e){t.$set(t.dialogForm,"zymc",e)},expression:"dialogForm.zymc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所在部门","label-width":t.formLabelWidth,prop:"bmbm",rules:[{required:!0,message:"不能为空"}]}},[a("el-select",{attrs:{placeholder:"请选择所在部门"},model:{value:t.dialogForm.bmbm,callback:function(e){t.$set(t.dialogForm,"bmbm",e)},expression:"dialogForm.bmbm"}},t._l(t.bmOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.bmmc,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.dialogForm.bz,callback:function(e){t.$set(t.dialogForm,"bz",e)},expression:"dialogForm.bz"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.isSave},on:{click:function(e){return t.saveOrUpdate("dialogForm")}}},[t._v("确 定")])],1)],1)],1)},l=[],r=a("2934"),i={dwbm:localStorage.getItem("dwbm")},n={data:function(){return{form:{zymc:"",bmbm:""},isSave:!1,total:1,current:1,bmOptions:[],tableData:[],dialogForm:{zymc:"",bmmc:"",bmbm:"",bz:""},visible:!1,formLabelWidth:"80px"}},mounted:function(){this.getAllBm(),this.onSubmit()},methods:{getAllBm:function(){var t=this,e={dwbm:localStorage.getItem("dwbm")};Object(r["a"])("/manager/queryAllBm",e,"POST").then((function(e){0==e.code&&(console.log(e.data),t.bmOptions=e.data.data)}))},handleCurrentChange:function(t){this.current=t,this.onSubmit()},resetForm:function(){this.form={},this.onSubmit()},onSubmit:function(){var t=this,e={};e.dwbm=localStorage.getItem("dwbm"),e.current=this.current,this.form.bmbm&&(e.bmbm=this.form.bmbm),this.form.zymc&&(e.zymc=this.form.zymc),console.log(e),Object(r["a"])("/manager/queryZyxx",e,"POST").then((function(e){0==e.code&&(t.tableData=e.data.data,t.total=e.data.total)}))},UpdateForm:function(t){console.log(t),this.visible=!0,this.dialogForm.id=t.id,this.dialogForm.zymc=t.zymc,this.dialogForm.bmbm=t.bmbm,this.dialogForm.bz=t.bz},addForm:function(){this.visible=!0},deleteRow:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])("/manager/deleteZy",t,"POST").then((function(t){0==t.code?(e.$message({type:"success",message:"删除成功"}),e.onSubmit()):e.$message.error(t.message)})).catch((function(t){e.$message({type:"error",message:t})}))})).catch((function(t){e.$message({type:"info",message:t})}))},saveOrUpdate:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.isSave=!0;var a=Object.assign(e.dialogForm,i);e.dialogForm.id&&(a.id=e.dialogForm.id),Object(r["a"])("/manager/saveOrUpdateZy",a,"POST").then((function(t){0==t.code?(e.$message.success("操作成功"),e.onSubmit(),e.visible=!1):e.$message.error(t.err),e.isSave=!1})).catch((function(t){e.$message.error(t),e.isSave=!1}))}))}}},m=n,s=(a("e7b3"),a("2877")),c=Object(s["a"])(m,o,l,!1,null,null,null);e["default"]=c.exports},e7b3:function(t,e,a){"use strict";var o=a("f356"),l=a.n(o);l.a},f356:function(t,e,a){}}]);