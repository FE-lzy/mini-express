(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dc97208"],{"1d81":function(l,t,s){"use strict";var e=s("cdc4"),a=s.n(e);a.a},"4df52":function(l,t,s){"use strict";s.r(t);var e=function(){var l=this,t=l.$createElement,s=l._self._c||t;return s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[s("div",{staticClass:"top"},[s("h3",[l._v("发票查验明细")]),l._v(" "),s("p",{staticClass:"billTitle",staticStyle:{"text-align":"center"}},[l._v(l._s(l.bill.invoiceTypeName))]),l._v(" "),s("div",{staticClass:"billinfo"},[s("span",[l._v("\n          发票代码：\n          "),s("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceDataCode))])]),l._v(" "),s("span",[l._v("\n          发票号码：\n          "),s("span",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceNumber))])]),l._v(" "),s("span",[l._v("\n          开票日期：\n          "),s("span",{staticClass:"purple"},[l._v(l._s(l.bill.billingTime))])]),l._v(" "),s("span",[l._v("\n          校验码：\n          "),s("span",{staticClass:"purple"},[l._v(l._s(l.bill.checkCode))])]),l._v(" "),s("span",[l._v("\n          机器编号：\n          "),s("span",{staticClass:"purple"},[l._v(l._s(l.bill.taxDiskCode))])])])]),l._v(" "),s("div",{staticClass:"box"},[s("el-row",{staticStyle:{border:"1px solid #ccc"},attrs:{type:"flex"}},[s("el-col",{attrs:{span:1}},[s("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            购\n            "),s("br"),l._v("买\n            "),s("br"),l._v("方\n          ")])]),l._v(" "),s("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:16}},[s("div",{staticClass:"buyDetail"},[s("el-row",[s("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),s("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.purchaserName))])],1),l._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),s("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.taxpayerNumber))])],1),l._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),s("el-col",{attrs:{span:18}})],1),l._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),s("el-col",{attrs:{span:18}})],1)],1)]),l._v(" "),s("el-col",{attrs:{span:1}},[s("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            密\n            "),s("br"),l._v("码\n            "),s("br"),l._v("区\n          ")])]),l._v(" "),s("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[s("div")])],1),l._v(" "),s("br"),l._v(" "),s("el-row",{staticClass:"goodsDetail",staticStyle:{"margin-top":"-15px"},attrs:{type:"flex"}},[s("el-col",{attrs:{span:5}},[s("el-row",[s("el-col",[l._v("货物或应税劳务、服务名称")])],1)],1),l._v(" "),s("el-col",{attrs:{span:3}},[s("el-row",[s("el-col",[l._v("车牌号")])],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",[l._v("通行日期起")])],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",[l._v("通行日期止")])],1)],1),l._v(" "),s("el-col",{attrs:{span:3}},[s("el-row",[s("el-col",[l._v("金额")])],1)],1),l._v(" "),s("el-col",{attrs:{span:1}},[s("el-row",[s("el-col",[l._v("税率")])],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",[l._v("税额")])],1)],1)],1),l._v(" "),l._l(l.bill.detailData,(function(t){return s("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[s("el-col",{attrs:{span:5}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v(l._s(t.goodserviceName))])],1)],1),l._v(" "),s("el-col",{attrs:{span:3}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v(l._s(t.plateNo))])],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v(l._s(t.passStartDate))])],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v(l._s(t.passEndDate))])],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v(l._s(t.sum))])],1)],1),l._v(" "),s("el-col",{attrs:{span:1}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v(l._s(t.taxRate))])],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v(l._s(t.tax))])],1)],1)],1)})),l._v(" "),s("el-row",{staticClass:"goodsDetail",attrs:{type:"flex"}},[s("el-col",{attrs:{span:5}},[s("el-row",[s("el-col",[l._v("合计")])],1)],1),l._v(" "),s("el-col",{attrs:{span:3}},[s("el-row",[s("el-col")],1)],1),l._v(" "),s("el-col",{attrs:{span:2}},[s("el-row",[s("el-col")],1)],1),l._v(" "),s("el-col",{attrs:{span:2}},[s("el-row",[s("el-col")],1)],1),l._v(" "),s("el-col",{attrs:{span:3}},[s("el-row",[s("el-col")],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalAmount))])],1)],1),l._v(" "),s("el-col",{attrs:{span:1}},[s("el-row",[s("el-col")],1)],1),l._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxNum))])],1)],1)],1),l._v(" "),s("el-row",{staticStyle:{border:"1px solid #ccc",height:"40px","line-height":"40px","text-align":"center"},attrs:{type:"flex"}},[s("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:5}},[l._v("价格合计(大写)")]),l._v(" "),s("el-col",{staticClass:"purple",attrs:{span:10}},[l._v("六百五十体验版")]),l._v(" "),s("el-col",{attrs:{span:9}},[l._v("\n          (小写)\n          "),s("span",{staticClass:"purple"},[l._v("￥"+l._s(l.bill.totalTaxSum))])])],1),l._v(" "),s("el-row",{staticStyle:{border:"1px solid #ccc"},attrs:{type:"flex"}},[s("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:1}},[s("div",{staticClass:"topTitle"},[l._v("\n            销\n            "),s("br"),l._v("售\n            "),s("br"),l._v("方\n          ")])]),l._v(" "),s("el-col",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{span:16}},[s("div",{staticClass:"buyDetail"},[s("el-row",[s("el-col",{attrs:{span:6}},[l._v("名称：")]),l._v(" "),s("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesName))])],1),l._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[l._v("纳税人识别号：")]),l._v(" "),s("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerNum))])],1),l._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[l._v("地址、电话：")]),l._v(" "),s("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerAddress))])],1),l._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[l._v("开户行及账号：")]),l._v(" "),s("el-col",{staticClass:"purple",attrs:{span:18}},[l._v(l._s(l.bill.salesTaxpayerBankAccount))])],1)],1)]),l._v(" "),s("el-col",{attrs:{span:1}},[s("div",{staticClass:"topTitle",staticStyle:{"border-right":"1px solid #ccc"}},[l._v("\n            备\n            "),s("br"),l._v("注\n            "),s("br"),l._v("区\n          ")])]),l._v(" "),s("el-col",{staticStyle:{height:"100%"},attrs:{span:6}},[s("div",{staticClass:"purple"},[l._v(l._s(l.bill.invoiceRemarks))])])],1)],2)]),l._v(" "),s("div",{staticClass:"right"},[s("el-form",{ref:"validForm",attrs:{"label-position":l.labelPosition,"label-width":"120px",model:l.form}},[s("h2",{staticStyle:{"text-align":"center"}},[l._v("发票录入")]),l._v(" "),s("el-form-item",{attrs:{label:"发票归属部门",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[s("el-select",{attrs:{filterable:"",placeholder:"所在部门"},model:{value:l.form.fp_gsbm,callback:function(t){l.$set(l.form,"fp_gsbm",t)},expression:"form.fp_gsbm"}},l._l(l.bmOptions,(function(l){return s("el-option",{key:l.id,attrs:{label:l.bmmc,value:l.id}})})),1)],1),l._v(" "),s("el-form-item",{attrs:{label:"发票归属人",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[s("el-select",{attrs:{filterable:"",placeholder:"发票归属人"},model:{value:l.form.fp_gsr,callback:function(t){l.$set(l.form,"fp_gsr",t)},expression:"form.fp_gsr"}},l._l(l.userOptions,(function(l){return s("el-option",{key:l.id,attrs:{label:l.zymc,value:l.id}})})),1)],1),l._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:l.form.fp_bz,callback:function(t){l.$set(l.form,"fp_bz",t)},expression:"form.fp_bz"}})],1),l._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return l.saveBill("validForm")}}},[l._v("录入")]),l._v(" "),s("el-button",[l._v("返回")])],1)],1)],1)])},a=[],r=s("2934"),i={dwbm:localStorage.getItem("dwbm")},o={name:"bill",data:function(){return{labelPosition:"right",form:{fp_gsr:"",fp_gsbm:"",fp_bz:""},billResJSON:"",bill:{invoiceTypeName:"",invoiceDataCode:"",invoiceNumber:"",billingTime:"",checkCode:"",taxDiskCode:"",purchaserName:"",taxpayerNumber:"",salesName:"",salesTaxpayerNum:"",salesTaxpayerBankAccount:"",salesTaxpayerAddress:"",totalTaxNum:"",totalTaxSum:"",totalAmount:"",invoiceRemarks:"",detailData:[{}]},bmOptions:[],userOptions:[]}},beforeMount:function(){if(!this.$route.params.scanStr)return this.$message.error("缺少参数"),void this.$router.go(-1);this.getAllUser(),this.getAllBm()},mounted:function(){this.handleBillInfo(),this.handleUserInfo()},methods:{getAllBm:function(){var l=this,t={dwbm:localStorage.getItem("dwbm")};Object(r["a"])("/manager/queryAllBm",t,"POST").then((function(t){0==t.code&&(l.bmOptions=t.data.data)}))},getAllUser:function(){var l=this,t={dwbm:localStorage.getItem("dwbm"),bmbm:this.form.fp_gsbm};Object(r["a"])("/manager/queryAllUser",t,"POST").then((function(t){0==t.code&&(l.userOptions=t.data)}))},handleBillInfo:function(){if(this.$route.params.scanStr){var l=this.$route.params.scanStr;this.$route.params.isHave&&(this.$message.warning("发票已存在，请勿重复录入"),l=this.$route.params.scanStr.fp_detail.fp_detail),this.billResJSON=l,console.log("table:",l),l=JSON.parse(l),this.bill.invoiceTypeName=l.invoiceTypeName,this.bill.invoiceDataCode=l.invoiceDataCode,this.bill.invoiceNumber=l.invoiceNumber,this.bill.billingTime=l.billingTime,this.bill.checkCode=l.checkCode,this.bill.taxDiskCode=l.taxDiskCode,this.bill.purchaserName=l.purchaserName,this.bill.taxpayerNumber=l.taxpayerNumber,this.bill.salesName=l.salesName,this.bill.salesTaxpayerNum=l.salesTaxpayerNum,this.bill.salesTaxpayerBankAccount=l.salesTaxpayerBankAccount,this.bill.salesTaxpayerAddress=l.salesTaxpayerAddress,this.bill.totalTaxNum=l.totalTaxNum,this.bill.totalTaxSum=l.totalTaxSum,this.bill.totalAmount=l.totalAmount,this.bill.invoiceRemarks=l.invoiceRemarks,this.bill.detailData=l.invoiceDetailData}},handleUserInfo:function(){if(this.$route.params.isHave){var l=this.$route.params.scanStr;console.log(l.fp_gsr),l.fp_gsr&&(this.form.fp_gsr=l.fp_gsr,this.form.fp_gsbm=l.fp_gsbm,this.form.fp_bz=l.fp_bz)}},saveBill:function(l){var t=this;console.log(l),""!=this.billResJSON?this.$refs[l].validate((function(l){if(l){var s=Object.assign(t.form,{billInfo:t.billResJSON},{uid:localStorage.getItem("userId")},i);console.log(s),Object(r["a"])("/bill/saveBill",s,"POST").then((function(l){0==l.code?(t.$message.success("操作成功"),t.$router.go(-1)):t.$message.error(l.message)}))}})):this.$message.error("发票信息为空,请先验证发票")}}},c=o,n=(s("1d81"),s("2877")),p=Object(n["a"])(c,e,a,!1,null,"232e2329",null);t["default"]=p.exports},cdc4:function(l,t,s){}}]);