(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-310c0aca"],{"7cd8":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"tableBox"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{attrs:{placeholder:"部门名称"},model:{value:t.form.bmmc,callback:function(e){t.$set(t.form,"bmmc",e)},expression:"form.bmmc"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getAllBm}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:function(e){return t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addForm}},[t._v("新增")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"部门编码",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bmmc",label:"部门名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dwmc",label:"单位名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bz",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.UpdateForm(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteRow(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":t.current,"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.current=e},"update:current-page":function(e){t.current=e},"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"操作",visible:t.visible,width:"20%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm}},[a("el-form-item",{attrs:{label:"部门名称","label-width":t.formLabelWidth,prop:"bmmc",rules:[{required:!0,message:"不能为空"}]}},[a("el-input",{attrs:{placeholder:"请输入内容",autocomplete:"off"},model:{value:t.dialogForm.bmmc,callback:function(e){t.$set(t.dialogForm,"bmmc",e)},expression:"dialogForm.bmmc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.dialogForm.bz,callback:function(e){t.$set(t.dialogForm,"bz",e)},expression:"dialogForm.bz"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveOrUpdate("dialogForm")}}},[t._v("确 定")])],1)],1)],1)},l=[],r=a("2934"),n={name:"PartmentMan",data:function(){return{form:{bmmc:""},dialogForm:{bmmc:"",bz:""},visible:!1,total:1,current:1,formLabelWidth:"80px",tableData:[]}},mounted:function(){this.getAllBm()},methods:{getAllBm:function(){var t=this,e={dwbm:localStorage.getItem("dwbm"),current:this.current};this.form.bmmc&&(e.bmmc=this.form.bmmc),Object(r["a"])("/manager/queryAllBm",e,"POST").then((function(e){console.log(e),0==e.code&&(t.tableData=e.data.data,t.total=e.data.total)}))},handleCurrentChange:function(t){this.current=t,this.getAllBm()},resetForm:function(){this.form={},this.getAllBm()},UpdateForm:function(t){this.visible=!0,this.dialogForm.id=t.id,this.dialogForm.bmmc=t.bmmc,this.dialogForm.bz=t.bz},addForm:function(){this.visible=!0},saveOrUpdate:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var a=e.dialogForm;e.dialogForm.id&&(a.id=e.dialogForm.id),a.dwbm=localStorage.getItem("dwbm"),console.log(a),Object(r["a"])("/manager/saveOrUpdatePart",a,"POST").then((function(t){0==t.code?(e.$message.success("操作成功"),e.getAllBm(),e.dialogForm={},e.visible=!1):e.$message.error(t.message)})).catch((function(t){e.$message.error(t)}))}))},deleteRow:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])("/manager/deletePart",t,"POST").then((function(t){0==t.code?(e.$message({type:"success",message:"删除成功"}),e.getAllBm()):e.$message.error(t.message)})).catch((function(t){e.$message({type:"error",message:t})}))})).catch((function(t){e.$message({type:"info",message:t})}))}}},i=n,c=(a("b2aa"),a("2877")),s=Object(c["a"])(i,o,l,!1,null,null,null);e["default"]=s.exports},abde:function(t,e,a){},b2aa:function(t,e,a){"use strict";var o=a("abde"),l=a.n(o);l.a}}]);